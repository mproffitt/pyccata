JIRA Reporting application suite
===========================

This suite provides helper classes and functionality for generating Reports in Microsoft Word format from Jira.

The suite requires a basic driver to be provided to set up the applications configuration file, and a JSON configuration file to be stored in `${XDG_CONFIG_HOME}/releaseessentials/` (usually `~/.config`).

An example driver can be seen by examining the `releasenote.py` file.

Requirements
-----------------------

This application can only be executed with Python 3.4 or later and requires the following libraries:

* jira
* lxml
* cairosvg
* tinycss
* cssselect
* pygal
* numpy
* Pillow
* python-docx
* pyquery

Tests
---------
To execute the tests, you will further require:

* nose
* pbr
* mock
* ddt

Installation
------------
To install this application, the following RPM libraries are required:

* xz-devel
* libxml2
* libxml2-devel
* libjpeg-devel

Once installed, from the root of the JiraWeeklyReport directory, execute the following:

    python3 setup.py install

If installation aborts with the following error:

    Tk/tkImaging.c:396:5: error: ISO C90 forbids mixed declarations and code [-Werror=declaration-after-statement]

Use the following steps to resolve:

1) Clone the Pillow repo from https://github.com/python-pillow/Pillow:

    git clone https://github.com/python-pillow/Pillow.git

2) Open Tk/tkImaging.c and apply the following changes

    Line 374:
    -    PyObject *bytes = PyUnicode_EncodeFSDefault(fname);
    +    PyObject* bytes;
    +    bytes = PyUnicode_EncodeFSDefault(fname);

    Line 395:
    +    void* func;
         /* Reset errors. */
         dlerror();
    -    void *func = dlsym(lib_handle, func_name);
    +    func = dlsym(lib_handle, func_name);


Tests
---------
To execute the tests, you will further require:

* nose
* pbr
* mock
* ddt

Tests can be executed by running the following command:

    python3 setup.py nosetests -s --with-coverage --cover-branches --cover-html --cover-package releaseessentials

This command will generate code coverage and place this in the `cover` directory in the module root.

Linting
-------
If you have PyLint installed, code quality can be obtained by running:

    python3-pylint releaseessentials

Lint configuration:

To avoid common warnings, set the following in your `~/.pylintrc`

    max-line-length=120
    disable=locally-disabled,abstract-class-not-used,maybe-no-member

Documentation
-------------
If Doxygen and graphviz are installed, API documentation can be generated by executing `doxygen` in the root of the module.

A Doxyfile has been provided for this purpose which will generate API documentation with class, collaboration, call and callee graphs embedded within.

Please note, this API is not complete although existing functionality is not expected to change.

Sample configuration
-----------------------------------
The samples directory contains sample config as used by the `ReleaseNote` module for generating reports.

TODO
---------
* Document how to write the config files including available and required fields
* Picture and graph generation
* Embedded hyperlinks
* Complex types

